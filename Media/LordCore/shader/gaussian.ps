#version 100

precision mediump float;

// Dynamically passed in at compile time
// #define BLUR_FILTER_NUMBER 7

const int maxBlurFilterNumber = 7;

uniform sampler2D texSampler;
uniform vec4 gaussianFilter[maxBlurFilterNumber];
varying vec2 texCoord;

void main(void)
{
    vec4 color = texture2D(texSampler, texCoord) * gaussianFilter[0].z;
	for( int i = 1; i < BLUR_FILTER_NUMBER; i++ )
	{
		vec2 offset = gaussianFilter[i].xy;
		float weight = gaussianFilter[i].z;
		color += texture2D(texSampler, texCoord + offset) * weight;
		color += texture2D(texSampler, texCoord - offset) * weight;
	}
	gl_FragColor = color;
}

#version 100

uniform sampler2D texSampler;
uniform sampler2D texMaskSampler;

varying mediump vec4 color;
varying mediump vec2 texCoord;

void main(void)
{
	mediump vec4 textureColor = texture2D(texSampler, texCoord);
	mediump vec4 maskColor = texture2D(texMaskSampler, texCoord);
	mediump float alpha = maskColor.r * textureColor.a * color.a;
	if (alpha < 0.1)
		discard;
	gl_FragColor = vec4(textureColor.xyz * color.rgb, alpha);
}
#version 100

uniform sampler2D ScnSamp;
uniform mediump float strength;
uniform mediump vec2 blurCenter;

varying mediump vec2 texCoord;


void main(void)
{
    mediump vec2 dir = texCoord - blurCenter;
    mediump float distanceSquare = dir.x * dir.x + dir.y * dir.y;

    dir = normalize(dir);
    mediump vec4 outColor = vec4(0,0,0,0);

    for (int j = 0; j < 6; j++)
    {
        mediump float offset = float(j) * strength;
        mediump vec2 uv = texCoord + dir * distanceSquare * offset;

        //个别手机调用texCoord+vec2 出现异常，原因未明，先打补丁
        if(distanceSquare < 0.01)
        {
            uv = texCoord;
        }

        outColor += texture2D(ScnSamp, uv);
    }

    outColor /= 6.0;
    outColor.a = 1.0;

    gl_FragColor = outColor;
}
#version 100

uniform sampler2D texSampler;

varying mediump vec4 color;
varying mediump vec2 texCoord;

void main(void)
{
	mediump vec4 textureColor = texture2D(texSampler, texCoord);
	mediump vec3 weight = vec3(0.299, 0.587, 0.114);
	mediump float gray_value =  dot(textureColor.xyz * color.rgb, weight );
	if (textureColor.w == 0.0)
		gl_FragColor = vec4(1.0, 1.0, 1.0, 0.0);
	else
		gl_FragColor = vec4(gray_value, gray_value, gray_value, gray_value);
}